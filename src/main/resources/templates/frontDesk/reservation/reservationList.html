
<!--
 Guys, I have added the table list page with the table form and update form.
 It's the same as we did with Cor using jQuery but this one is with Thymeleaf and Tailwind CSS.

 Update the form based on your form fields and the controller mappings.
 Be careful with the form action and the input field names.

 USE THE CODE BELOW:
 -->
<!--
TODO 1: Add the table list page with the table form and update form
TODO 2: Implement JavaScript to handle the form submission and update
-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservations</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.8/css/dataTables.tailwindcss.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatable/2.0.2/js/datatable.js" integrity="sha512-jNM5sph4S0JfKyz27iPhIFj4JG8o/XiIu7WUgCM/EGYCizlQW+RzMi8Y/rnXlqpkUl7ELz5SLfuF44zCvS3NYQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        #tableList {
            width: 80vw !important;
        }
        td{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-size: 12px;
        }
        th{
            font-size: 12px;
        }
    </style>
</head>
<body >
<div class="w-[100px] relative min-h-screen bg-gray-100">
    <div class="w-full flex flex items-center justify-center absolute z-10 h-screen">
        <div class="bg-white p-8 rounded-lg shadow-lg ">
            <h1 class="text-2xl font-bold mb-6">Reservations</h1>
            <a href="/reservations"> <button id="addButton" class="w-full flex justify-center mb-3 py-2 px-4 border border-transparent
             rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none
              focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Create New Reservation</button></a>
            <table id="tableList" class="mt-10 text-xs">
                <thead>
                <tr>
                    <th class="text-left">Table NO.</th>
                    <th class="text-left">First Name</th>
                    <th class="text-left">Last Name</th>
                    <th class="text-left">Email</th>
                    <th class="text-left">Reservation Date</th>
                    <th class="text-left">Reservation Time</th>
                    <th class="text-left">Number of Guests</th>
                    <th class="text-left">Room Number</th>
                    <th class="text-left">Hotel Guest</th>
                    <th class="text-left">Status</th>
                    <th class="text-left">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="reservation : ${reservations}">
                    <td>
                        <ul>
                            <li th:each="table : ${reservation.tables}">
                                Table NO.: <span th:text="${table.tableNumber}"></span>,
                                Seats: <span th:text="${table.tableCapacity}"></span>
                            </li>
                        </ul>
                    </td>
                    <td th:text="${reservation.customerFirstName}"></td>
                    <td th:text="${reservation.customerLastName}"></td>
                    <td th:text="${reservation.customerEmail}"></td>
                    <td th:text="${reservation.reservationDate}"></td>
                    <td th:text="${reservation.reservationTime}"></td>
                    <td th:text="${reservation.numberOfGuests}"></td>
                    <td th:text="${reservation.roomNumber}"></td>
                    <td th:text="${reservation.guest} ? 'Yes' : 'No'"></td>
                    <td>
                        <a th:text="${reservation.reservationStatus}"
                           th:href="@{'/reservations/editStatus/' + ${reservation.id}}"
                           th:data-id="${reservation.id}"
                            th:data-reservationStatus="${reservation.reservationStatus}"
                           class="editStatus"></a>
                    </td>
                    <td class="flex gap-x-3">
                        <!-- Pass the reservation id and other relevant data to the edit button -->
                        <a
                                th:href="@{'/reservations/editReservation/' + ${reservation.id}}"
                                th:data-first-name="${reservation.customerFirstName}"
                                th:data-last-name="${reservation.customerLastName}"
                                th:data-email="${reservation.customerEmail}"
                                th:data-date="${reservation.reservationDate}"
                                th:data-time="${reservation.reservationTime}"
                                th:data-guests="${reservation.numberOfGuests}" class="editButton text-indigo-600 hover:text-indigo-900">
                            <i class="fa-solid fa-pen"></i>
                        </a>
                        <a th:href="@{'/reservations/deleteReservation/' + ${reservation.id}}" class="deleteButton text-red-600 hover:text-red-900">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!-- Include the add and update form using fragment
        Check the addForm.html and updateForm.html for the form structure
    -->
<!--    <div th:insert="admin/tableManagement/addForm :: addTableFormHTML"></div>-->
<!--    <div th:insert="admin/tableManagement/updateForm :: updateTableFormHTML"></div>-->
<!--    <div th:insert="frontDesk/reservation/reservationStatusForm :: reservationStatusForm"></div>-->
</div>
<script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.0.8/js/dataTables.tailwindcss.js"></script>
<!-- Include the tablesForm.js file  from the static folder
    Create your own js file in the js folder and use it like this
-->
<!--<script th:src="@{/js/tablesForm.js}"></script>-->
<script>
    $(document).ready(function() {
          new DataTable("#tableList",{
                sWidth: "40%",
                bAutoWidth: false,
          });
    });
</script>
</body>
</html>
